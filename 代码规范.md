# 代码规范（2021.5.15制定，暂行）

## 1. 项目文件结构管理

### 1.0 文件操作规范

1.0.0 对于类、方法、变量、资源文件、资源id等的重命名，类和资源文件的复制、剪切、删除等操作，必须**通过Android Studio的Refractor**进行，不允许在系统资源管理器内直接进行操作

1.0.1 对于可能存在内置图标的图标，建议使用Android Studio的内置图标以使用矢量图标，添加方法为：**右键drawable-New-Vector Asset**

## 1.1 git操作规范

1.1.1 建议除了master分之外，在本地新建工作分支，在正在改动/新增的功能较为完善前，所有提交提交到工作分支上，完成改动后再``merge``到master分支并推送

> 如何判定是否已经可以merge到master上？
>
> 当某次改动完成后，app中与改动有关的模块能够正常运行而没有严重的bug，即可与master进行merge

### 1.2 文件放置规范

1.2.1 各类应该放置到对应的包中，下表是各种类对应的包

|类|所在包|
|-|-|
|活动(Activity)|activities|
|适配器(Adapter)|adapters|
|数据库相关(DBHelper)|databases|
|片段(fragment)|fragments|

*待扩充*

对于自定义类，应避免放置在根包中，建议根据所属功能放置在对应的包中，没有可以新建

1.2.2 资源文件应放置到对应的文件夹中

|资源类型|所在文件夹|
|-|-|
|动画|anim|
|图标和图片|drawable|
|布局|layout|
|菜单|menu|
|常量值（颜色，字符串等）|values|

*待扩充*

## 1.3 命名规范

1.3.0 **命名应尽可能有意义**

### 1.3.1 类命名规范

1.3.1.1 类命名应使用**大驼峰命名法**  
如：**ActivityMain**

1.3.1.2 类命名方法表格

|类|命名方法|
|-|-|
|活动(Activity)|**Activity[活动名]**|
|片段(Fragment)|**Fragment[片段名]**|
|适配器(Adapter)|**[适配器名]Adapter**|

*待扩充*

### 1.3.2 类成员命名规范

1.3.2.1 非常量类成员（如变量、方法）命名应使用**小驼峰命名法**  
如：**onCreate**

1.3.2.2 常量类成员命名使用**大写下划线命名法**  
如：**MODIFY_MODE**

### 1.3.3 资源文件和资源id命名规范

1.3.3.1 资源文件和资源id命名使用**小写下划线命名法**  
如：**activity_main.xml**

#### 1.3.3.2 布局文件命名

1.3.3.2.1 对于活动(Activity)和片段(Fragment)使用的布局，直接以使用该布局的类的名称命名该布局

1.3.3.2.2 对于局部组件使用的布局，命名方法为**dynamic_[布局名]**

如：**activity_main.xml,fragment_habit.xml,dynamic_habit_card.xml**

---

1.3.3.3 内置图标文件使用Android Studio自动生成的名称

1.3.3.4 对于除布局文件和内置图标文件以外的资源文件，以及资源id，命名方法为**[使用场景]_[资源名]**，此时无需添加activity,fragment等前缀  
如：**habit\_card\_name**

## 2. 代码规范

### 2.1 活动(Activity)类规范

2.1.1 活动(Activity)应继承自**BaseActivity**

2.1.2 活动(Activity)应提供静态公共方法**startAction**用于启动该活动，基本结构如下：
```java
public class ActivityExample extends BaseActivity {
	
    static public void startAction(Context context, paramtype1 param1, paramtype2 param2,...){
    	Intent intent = new Intent(context, ActivityExample.class);
        intent.putExtra(paramname1,param1);
        intent.putExtra(paramname2,param2);
        /*...*/
        context.startActivity(intent);
    }
    
}
```
一个示例如下
```java
public class ActivityModifyHabit extends BaseActivity {

	/*...*/

    static public void startAction(Context context, int mode){
        Intent intent = new Intent(context, ActivityModifyHabit.class);
        intent.putExtra(START_PARAM_MODE,mode);
        context.startActivity(intent);
    }

    static public void startAction(Context context, int mode, String habitName){
        Intent intent = new Intent(context, ActivityModifyHabit.class);
        intent.putExtra(START_PARAM_MODE, mode);
        intent.putExtra(START_PARAM_HABIT_NAME,habitName);
        context.startActivity(intent);
    }
    
    /*...*/
}
```
更多细节可以参阅《第一行代码：第2版》P74-P75

### 2.2 片段(Fragment)类规范

2.2.1 片段(Activity)应继承自**BaseFragment**

### 2.3 注释规范

2.3.1 在声明变量处表明变量含义

2.3.2 非重写的方法必须进行注释，重写方法选择性注释，注释格式如下
```java
/**
 * [方法功能]
 * @param [参数1] [参数1描述]
 * ...
 * @return 返回值描述
 * @exception [可能抛出的异常1] [异常1描述]
 * ...
 */
 public void example(paramtype1 param1,...){
 	/*...*/
    return /*...*/;
 }
```

### 2.4 杂七杂八的规范

# -1 改动

## 2021.05.15

- 新增了1.1 git操作规范